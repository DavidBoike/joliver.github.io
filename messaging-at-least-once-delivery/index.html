<!DOCTYPE html>
<html lang="en-US">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    
    
        <meta name="twitter:card" content="summary"/>
    



<meta name="twitter:title" content="Messaging: At-Least-Once Delivery"/>
<meta name="twitter:description" content=""/>
<meta name="twitter:site" content="@jonathan_oliver"/>



  	<meta property="og:title" content="Messaging: At-Least-Once Delivery &middot; Jonathan Oliver" />
  	<meta property="og:site_name" content="Jonathan Oliver" />
  	<meta property="og:url" content="http://blog.jonathanoliver.com/messaging-at-least-once-delivery/" />

    
        
            <meta property="og:image" content="/images/cover.jpg"/>
        
    

    
    <meta property="og:description" content="" />
  	<meta property="og:type" content="article" />
    <meta property="article:published_time" content="2010-04-22T00:00:00Z" />

    
    

    <title>Messaging: At-Least-Once Delivery &middot; Jonathan Oliver</title>

    
    <meta name="description" content="One of the guarantees behind messaging is guaranteed delivery. Most of us don&#39;t give any additional thought to the subject. Until we get into production. While " />
    

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="http://blog.jonathanoliver.com/images/favicon.ico">
	  <link rel="apple-touch-icon" href="http://blog.jonathanoliver.com/images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="http://blog.jonathanoliver.com/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="http://blog.jonathanoliver.com/css/nav.css" />

    

    
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/styles/default.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
        
        <script>hljs.initHighlightingOnLoad();</script>
    

    
      
          <link href="http://blog.jonathanoliver.com/index.xml" rel="alternate" type="application/rss+xml" title="Jonathan Oliver" />
      
      
    
    <meta name="generator" content="Hugo 0.46-DEV" />

    <link rel="canonical" href="http://blog.jonathanoliver.com/messaging-at-least-once-delivery/" />

    
      
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": ,
        "logo": http://blog.jonathanoliver.com/images/tux.png
    },
    "author": {
        "@type": "Person",
        "name": ,
        
        "image": {
            "@type": "ImageObject",
            "url": http://blog.jonathanoliver.com/images/tux.png,
            "width": 250,
            "height": 250
        }, 
        
        "url": https://blog.jonathanoliver.com,
        "sameAs": [
            
            
             
             
             
             
             
            
        ]
    },
    "headline": Messaging: At-Least-Once Delivery,
    "name": Messaging: At-Least-Once Delivery,
    "wordCount": 309,
    "timeRequired": "PT2M",
    "inLanguage": {
      "@type": "Language",
      "alternateName": en
    },
    "url": http://blog.jonathanoliver.com/messaging-at-least-once-delivery/,
    "datePublished": 2010-04-22T00:00Z,
    "dateModified": 2010-04-22T00:00Z,
    
    
    "description": ,
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": http://blog.jonathanoliver.com/messaging-at-least-once-delivery/
    }
}
    </script>
    


    

    

    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
    </ul>

    
    <a class="subscribe-button icon-feed" href="http://blog.jonathanoliver.com/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">



<header class="main-header post-head no-cover">
  <nav class="main-nav clearfix">


  
      <a class="blog-logo" href="http://blog.jonathanoliver.com/"><img src="http://blog.jonathanoliver.com/images/tux.png" alt="Home" /></a>
  
  
      <a class="menu-button icon-feed" href="http://blog.jonathanoliver.com/index.xml" >&nbsp;&nbsp;Subscribe</a>
  
  </nav>
</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">Messaging: At-Least-Once Delivery</h1>
        <small></small>

        <section class="post-meta">
        
          <time class="post-date" datetime="2010-04-22T00:00:00Z">
            Apr 22, 2010
          </time>
        
         
        </section>
    </header>

    <section class="post-content">
      <p align="justify">One of the guarantees behind messaging is guaranteed delivery. Most of us don't give any additional thought to the subject. Until we get into production. While messages may be guaranteed deliverable, have we ever considered that a message may be delivered more than once?</p> <p align="justify">When I first started seriously looking at and investigating messaging solutions a number of years ago one of the things that baffled me was how to ensure exactly-once delivery of messages. Virtually all messaging solutions provided at-least-once delivery. How could I prevent messages from being delivered more than once? And what about failure and failover of the message queuing infrastructure itself? Some of the cheaper or open source message infrastructure solutions that I investigated had some sort of quasi-failover, usually depending upon a shared drive as a single point of failure OR some asynchronous gossip protocol to let other peers know which messages had been delivered successfully.</p> <p align="justify">Now we live in a more cloudy environment, with cloud-based infrastructure starting to occupy the minds of development and operations teams alike. Many of the messaging solutions such as Windows Azure Queues and Amazon's SQS continue to offer guaranteed delivery, but like their traditional, non-cloud counterparts, they only offer it in the from of at-least-once delivery.</p> <p align="justify">In the end we have no way to prevent the infrastructure from delivering a message more than once. What can we do? As I have outlined in a <a href="http://blog.jonathanoliver.com/2010/04/idempotency-patterns.html">previous post</a>, we can apply a few idempotency patterns to make our application robust against the prospects of multiple delivery of messages.</p> <p align="justify">One of the primary reasons, if not the primary reason, that messaging systems offer at-least-once delivery rather than exactly-once delivery is that we run into limitations as expressed in the CAP theoremâ€”all "nodes" cannot possibly have a globally consistent snapshot and be available and partition tolerant. There is no unfailing "global brain".</p> 

    </section>


  <footer class="post-footer">


    








<figure class="author-image">
    <a class="img" href="http://blog.jonathanoliver.com/" style="background-image: url(/images/tux.png)"><span class="hidden">Jonathan Oliver's Picture</span></a>
</figure>


<section class="author">
  <h4><a href="http://blog.jonathanoliver.com/">Jonathan Oliver</a></h4>
  
  <p>Read <a href="http://blog.jonathanoliver.com/">more posts</a> by this author.</p>
  
  <div class="author-meta">
    <span class="author-location icon-location">Utah, USA</span>
    <span class="author-link icon-link"><a href="https://blog.jonathanoliver.com">https://blog.jonathanoliver.com</a></span>
  </div>
</section>




    
<section class="share">
  <h4>Share this post</h4>
  <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=Messaging%3a%20At-Least-Once%20Delivery&nbsp;-&nbsp;Jonathan%20Oliver&amp;url=http%3a%2f%2fblog.jonathanoliver.com%2fmessaging-at-least-once-delivery%2f"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="hidden">Twitter</span>
  </a>
  <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fblog.jonathanoliver.com%2fmessaging-at-least-once-delivery%2f"
      onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="hidden">Facebook</span>
  </a>
  <a class="icon-pinterest" style="font-size: 1.4em" href="http://pinterest.com/pin/create/button/?url=http%3a%2f%2fblog.jonathanoliver.com%2fmessaging-at-least-once-delivery%2f&amp;description=Messaging%3a%20At-Least-Once%20Delivery"
      onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
      <span class="hidden">Pinterest</span>
  </a>
  <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=http%3a%2f%2fblog.jonathanoliver.com%2fmessaging-at-least-once-delivery%2f"
     onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
      <span class="hidden">Google+</span>
  </a>
</section>



    

<div id="disqus_thread"></div>
<script>




var disqus_config = function () {
this.page.url = "http:\/\/blog.jonathanoliver.com\/messaging-at-least-once-delivery\/";  
this.page.identifier = "http:\/\/blog.jonathanoliver.com\/messaging-at-least-once-delivery\/"; 
};

(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://jonathanoliver.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>








  </footer>
</article>

</main>


  <aside class="read-next">
  
      <a class="read-next-story" style="no-cover" href="http://blog.jonathanoliver.com/message-idempotency-patterns-and-disk-usage/">
          <section class="post">
              <h2>Message Idempotency Patterns and Disk Usage</h2>
              
          </section>
      </a>
  
  
      <a class="read-next-story prev" style="no-cover" href="http://blog.jonathanoliver.com/idempotency-patterns/">
          <section class="post">
              <h2>Idempotency Patterns</h2>
          </section>
      </a>
  
</aside>



    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">Jonathan Oliver</a> (c) Jonathan Oliver. All rights reserved.</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="http://blog.jonathanoliver.com/js/jquery.js"></script>
    <script type="text/javascript" src="http://blog.jonathanoliver.com/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="http://blog.jonathanoliver.com/js/index.js"></script>
    
</body>
</html>

